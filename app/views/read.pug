extends ../layout/default.pug

mixin create_toc(tree, depth=0)
  each anchor, index in tree
    div
      span(style="display:inline-block; width:"+depth*10+"px")
      if (index === tree.length-1)
        | â””&gt;
      else if (depth===0 && index===0)
        | â”Œ&gt;
      else 
        | â”œ&gt;
      a.link(href="#"+anchor.anchor) #{anchor.content}
    if (anchor.nodes)
      +create_toc(anchor.nodes, depth+1)

block content
  .pageTitle #{meta.title}
    .pageToolbar
      if (user.canWrite)
        a.pageEditButton(href="/write"+navigation.current) ğŸ–‹ï¸ Edit...
        a.pageEditButton(onclick="return confirm('YOU ARE GOING TO DELETE "+navigation.current+". Are you SURE you want to do this?')", href="/delete"+navigation.current)  âŒ Delete...
      a.pageEditButton(href=page.repoPath, target="_blank") ğŸ™ View on github

  if (hierarchy.length > 1)
    .pageAddress
      each val, index in hierarchy
        a(href=prefix+val.url, class=(val.url === page.url ? "selected" : "")) #{val.name}
        if (val.url != page.url)
          span  ğŸ¡† 
  .toc 
    h2 Table of contents 
    +create_toc(tree)
  div !{data}
